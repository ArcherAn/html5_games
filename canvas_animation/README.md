## **canvas中使用Animate动画** ##
**如图：**

![](http://i.imgur.com/s5R1C92.png)


**1、**本程序中主要是使用了**requestAnimationFrame()**方法让浏览器自行决定帧速率，同时为了考虑各种浏览器下对**animate()**函数的兼容性不同，综合解决问题，将代码封装在**window.requestNextAnimationFrame()**方法中去。

**2、**程序中同时还是用了一个简单的等式，根据当前帧距离上一帧的时间，计算出每秒钟播放的帧数（帧速率，简称 fps）

具体代码实现如 **animation_test.html** 和 **requestNextAnimationFrame.js**

## **canvas中实现视差动画** ##
**如图：**

![](http://i.imgur.com/Nht3KCm.png)

在本程序中，先计算出绘制四个图层时需要对坐标系进行平移的距离，然后保存绘图环境对象的状态，平移坐标原点，并将每个图层之中的物体绘制出来，最后再恢复绘图环境对象。这个“保存状态、平移坐标系、绘制物体、恢复状态”的流程可以免去计算物体坐标的麻烦，不管图层在当前这一帧滚动至何处，我们都只需将各个物体画在相同的坐标点上即可。由于坐标系在各帧之间发生了平移，所以画出来的图像看上去好像正在移动。

## **精灵原地跑步动画** ##
**如图：**

![](http://i.imgur.com/Ehy6maA.png)

![](http://i.imgur.com/8greViv.png)

**1、**精灵表绘制器会把精灵表中表示当前动画帧的那个单元格画出来。绘制器对象中还有一个数组索引，该数组中的元素对应于精灵表中给个单元格的信息。调用**advace()**方法将索引值加1。<br>
**2、**上图中显示出一张简单的精灵表，同时在页面下方使用精灵表中的图像来绘制动画。应用程序使用精灵表绘制器来将精灵表中的单元格绘制到屏幕上。<br>
**3、**改程序将动画的帧速率设置为每秒10帧（意思是一秒中切换10个画面，一帧就相当于1张图片），因为每秒60帧的情况下，9帧的动画会以极快的速度飞逝而过。程序中使用了9参数的drawImage()方法，将精灵表中需要显示的那块区域绘制到canvas中。